{"ast":null,"code":"import _objectSpread from\"/Users/Tao.S/Desktop/WebDev/MA/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import*as actionTypes from\"../actions/auth_actions\";var initialState={token:localStorage.getItem(\"token\"),isAuthenticated:null,isLoading:false,user:null};var authReducer=function authReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case actionTypes.USER_LOADING:return _objectSpread(_objectSpread({},state),{},{isLoading:true});case actionTypes.USER_LOADED:return _objectSpread(_objectSpread({},state),{},{isAuthenticated:true,isLoading:false,user:action.payload});case actionTypes.LOGIN_SUCCESS:localStorage.setItem(\"token\",action.payload.token);return _objectSpread(_objectSpread(_objectSpread({},state),action.payload),{},{error:action.error,isAuthenticated:true,isLoading:false});case actionTypes.REGISTER_SUCCESS:localStorage.setItem(\"token\",action.payload.token);return _objectSpread(_objectSpread(_objectSpread({},state),action.payload),{},{isAuthenticated:true,isLoading:false});case actionTypes.AUTH_ERROR:case actionTypes.LOGIN_FAIL:case actionTypes.LOGOUT_SUCCESS:case actionTypes.REGISTER_FAIL:localStorage.removeItem(\"token\");return _objectSpread(_objectSpread({},state),{},{token:null,user:null,isAuthenticated:false,isLoading:false});default:return state;}};export default authReducer;","map":{"version":3,"sources":["/Users/Tao.S/Desktop/WebDev/MA/frontend/src/store/reducers/authReducer.tsx"],"names":["actionTypes","initialState","token","localStorage","getItem","isAuthenticated","isLoading","user","authReducer","state","action","type","USER_LOADING","USER_LOADED","payload","LOGIN_SUCCESS","setItem","error","REGISTER_SUCCESS","AUTH_ERROR","LOGIN_FAIL","LOGOUT_SUCCESS","REGISTER_FAIL","removeItem"],"mappings":"6JAAA,MAAO,GAAKA,CAAAA,WAAZ,KAA6B,yBAA7B,CAEA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,KAAK,CAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADY,CAEnBC,eAAe,CAAE,IAFE,CAGnBC,SAAS,CAAE,KAHQ,CAInBC,IAAI,CAAE,IAJa,CAArB,CAOA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAA4C,IAA3CC,CAAAA,KAA2C,2DAA9BR,YAA8B,IAAhBS,CAAAA,MAAgB,2CAG5D,OAAOA,MAAM,CAACC,IAAd,EACI,IAAKX,CAAAA,WAAW,CAACY,YAAjB,CACI,sCACKH,KADL,MAEEH,SAAS,CAAE,IAFb,GAKJ,IAAKN,CAAAA,WAAW,CAACa,WAAjB,CACI,sCACKJ,KADL,MAEEJ,eAAe,CAAE,IAFnB,CAGEC,SAAS,CAAE,KAHb,CAIEC,IAAI,CAAEG,MAAM,CAACI,OAJf,GAOJ,IAAKd,CAAAA,WAAW,CAACe,aAAjB,CACIZ,YAAY,CAACa,OAAb,CAAqB,OAArB,CAA8BN,MAAM,CAACI,OAAP,CAAeZ,KAA7C,EACA,oDACKO,KADL,EAGKC,MAAM,CAACI,OAHZ,MAIEG,KAAK,CAAEP,MAAM,CAACO,KAJhB,CAKEZ,eAAe,CAAE,IALnB,CAMEC,SAAS,CAAE,KANb,GASJ,IAAKN,CAAAA,WAAW,CAACkB,gBAAjB,CACIf,YAAY,CAACa,OAAb,CAAqB,OAArB,CAA8BN,MAAM,CAACI,OAAP,CAAeZ,KAA7C,EACA,oDACKO,KADL,EAGKC,MAAM,CAACI,OAHZ,MAIET,eAAe,CAAE,IAJnB,CAKEC,SAAS,CAAE,KALb,GAQJ,IAAKN,CAAAA,WAAW,CAACmB,UAAjB,CACA,IAAKnB,CAAAA,WAAW,CAACoB,UAAjB,CACA,IAAKpB,CAAAA,WAAW,CAACqB,cAAjB,CACA,IAAKrB,CAAAA,WAAW,CAACsB,aAAjB,CACMnB,YAAY,CAACoB,UAAb,CAAwB,OAAxB,EACA,sCACKd,KADL,MAEEP,KAAK,CAAE,IAFT,CAGEK,IAAI,CAAE,IAHR,CAIEF,eAAe,CAAE,KAJnB,CAKEC,SAAS,CAAE,KALb,GAOA,QACE,MAAOG,CAAAA,KAAP,CAjDZ,CAmDH,CAtDD,CAyDA,cAAeD,CAAAA,WAAf","sourcesContent":["import * as actionTypes from \"../actions/auth_actions\"\n\nconst initialState = {\n  token: localStorage.getItem(\"token\"),\n  isAuthenticated: null,\n  isLoading: false,\n  user: null,\n};\n\nconst authReducer = (state: any = initialState, action: any) => {\n\n\n    switch(action.type){\n        case actionTypes.USER_LOADING:\n            return{\n              ...state,\n              isLoading: true,\n            };\n\n        case actionTypes.USER_LOADED:\n            return{\n              ...state,\n              isAuthenticated: true,\n              isLoading: false,\n              user: action.payload,\n            };\n\n        case actionTypes.LOGIN_SUCCESS:\n            localStorage.setItem(\"token\", action.payload.token)\n            return{\n              ...state,\n              //return token and user data\n              ...action.payload,\n              error: action.error,\n              isAuthenticated: true,\n              isLoading: false,\n            };\n\n        case actionTypes.REGISTER_SUCCESS:\n            localStorage.setItem(\"token\", action.payload.token)\n            return{\n              ...state,\n              //sending the entire payload (includes token and user)\n              ...action.payload,\n              isAuthenticated: true,\n              isLoading: false,\n            };\n        \n        case actionTypes.AUTH_ERROR:\n        case actionTypes.LOGIN_FAIL:\n        case actionTypes.LOGOUT_SUCCESS:\n        case actionTypes.REGISTER_FAIL:\n              localStorage.removeItem(\"token\");\n              return{\n                ...state,\n                token: null,\n                user: null,\n                isAuthenticated: false,\n                isLoading: false,\n              };\n              default:\n                return state;\n    } \n}\n\n\nexport default authReducer\n"]},"metadata":{},"sourceType":"module"}