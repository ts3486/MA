{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/Tao.S/Desktop/WebDev/MA/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{connect}from\"react-redux\";import{FormWrapper}from\"./FormComponent_style\";import axios from\"axios\";import{TextField,Button}from'@material-ui/core';export var FormComponent=function FormComponent(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),filename=_useState2[0],setFilename=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDesc=_useState6[1];//Sennd Form Data\nvar postHandler=function postHandler(e){e.preventDefault();var postData={username:props.user.username,filename:filename,description:description,likes:\"\",date:new Date()};//form data can only be called once in one form?\nvar imageData=new FormData();imageData.append(\"image\",image);//Send post information to db\naxios.post(\"http://localhost:5000/posts/add\",postData).then(function(response){console.log(response,\"Post added!\");}).catch(function(error){return console.log(error);});//Upload image to db\naxios.post(\"http://localhost:5000/posts/add/image\",imageData).then(function(response){console.log(imageData);console.log(response,\"Image added!\");}).catch(function(error){return console.log(error);}).then(function(){return window.location.reload();});};return/*#__PURE__*/_jsx(FormWrapper,{children:/*#__PURE__*/_jsx(\"form\",{className:\"postForm\",action:\"/upload\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"formTitle\",children:\"Post your content!\"}),/*#__PURE__*/_jsx(Button,{children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"image\",id:\"input\",formEncType:\"multipart/form-data\",onChange:function onChange(e){setImage(e.target.files[0]);setFilename(e.target.files[0].name);},required:true})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextField,{id:\"standared-basic\",label:\"Description\",variant:\"outlined\",fullWidth:true,multiline:true,rows:6,children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"description\",id:\"input\",value:description,onChange:function onChange(e){return setDesc(e.target.value);},required:true})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{id:\"submit\",type:\"submit\",variant:\"contained\",onClick:postHandler,children:\"Submit\"})]})})});};var mapStateToProps=function mapStateToProps(state){return{user:state.auth.user,loggedIn:state.auth.isAuthenticated};};export default connect(mapStateToProps)(FormComponent);","map":{"version":3,"sources":["/Users/Tao.S/Desktop/WebDev/MA/frontend/src/Components/Forms/FormComponent.tsx"],"names":["React","useState","connect","FormWrapper","axios","TextField","Button","FormComponent","props","filename","setFilename","image","setImage","description","setDesc","postHandler","e","preventDefault","postData","username","user","likes","date","Date","imageData","FormData","append","post","then","response","console","log","catch","error","window","location","reload","target","files","name","value","mapStateToProps","state","auth","loggedIn","isAuthenticated"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\"\nimport {connect} from \"react-redux\";\nimport {FormWrapper} from \"./FormComponent_style\"\nimport axios from \"axios\";\nimport { TextField, Button } from '@material-ui/core';\n\n\n\nexport const FormComponent: React.FC = (props: any) => {\n\n    const [filename, setFilename] = useState(\"\");\n    const [image, setImage] = useState(null);\n    const [description, setDesc] = useState(\"\");\n\n    //Sennd Form Data\n    const postHandler = (e: any) => {\n        e.preventDefault();\n\n        const postData = {\n            username: props.user.username,\n            filename: filename,\n            description: description,\n            likes: \"\",\n            date: new Date(),\n        }\n\n        //form data can only be called once in one form?\n        const imageData: any = new FormData();\n\n\n        imageData.append(\"image\", image)\n        \n        //Send post information to db\n        axios.post(\"http://localhost:5000/posts/add\", postData).then(response => {\n          console.log(response, \"Post added!\"); \n          }).catch(error => console.log(error))\n        \n        //Upload image to db\n        axios.post(\"http://localhost:5000/posts/add/image\", imageData).then(response => {\n            console.log(imageData);\n            console.log(response, \"Image added!\");\n        }).catch( error => console.log(error))\n        .then(() => window.location.reload())\n      }\n\n    return(\n    \n    <FormWrapper>\n            <form className=\"postForm\" action=\"/upload\">\n\n                <div className=\"container\">\n\n                    <h1 className=\"formTitle\">Post your content!</h1>\n                    \n                    <Button>\n                        <input\n                        type=\"file\"\n                        name=\"image\"\n                        id=\"input\"\n                        formEncType=\"multipart/form-data\"\n                        onChange={(e: any) => {setImage(e.target.files[0]); setFilename(e.target.files[0].name); }}\n                        required\n                        />\n                    </Button>    \n                    <br /><br />\n                    <TextField id=\"standared-basic\" label=\"Description\" variant=\"outlined\" fullWidth multiline rows={6}>\n                        <input\n                        type=\"text\"\n                        name=\"description\"\n                        id=\"input\"\n                        value={description}\n                        onChange={(e)=> setDesc(e.target.value)}\n                        required/>\n                    </TextField>\n                    <br/><br/>\n                    \n                    {/* don`t call the function at the spot, because you won`t get the e and it become asynchronous. onClick passes \n                    the click event to postHandler using the reference. Also dont use onSubmit on a button, it`s for a form, \n                    Just use a callback (reference) to refer to the function defined.   */}\n                    <Button id=\"submit\" type=\"submit\" variant=\"contained\" onClick={postHandler}>Submit</Button>\n                </div>    \n            </form>\n    </FormWrapper>\n    )\n}\n\nconst mapStateToProps = (state: any) => {\n    return{\n        user: state.auth.user,\n        loggedIn: state.auth.isAuthenticated,\n    }\n}\n\nexport default connect(mapStateToProps)(FormComponent);\n\n"]},"metadata":{},"sourceType":"module"}